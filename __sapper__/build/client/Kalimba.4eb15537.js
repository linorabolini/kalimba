import{S as e,i as t,s as o,e as n,l as a,q as r,a as s,b as l,m as c,u as i,d as E,f as u,E as d,g as f,o as h,n as v,F as p,G as B}from"./index.4facd370.js";function G(e,t,o){this.context=e,this.urlList=t,this.onload=o,this.bufferList=new Array,this.loadCount=0}G.prototype.loadBuffer=function(e,t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer";var n=this;o.onload=function(){n.context.decodeAudioData(o.response,function(o){o?(n.bufferList[t]=o,++n.loadCount==n.urlList.length&&n.onload(n.bufferList)):alert("error decoding file data: "+e)},function(e){console.error("decodeAudioData error",e)})},o.onerror=function(){alert("BufferLoader: XHR error")},o.send()},G.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)};const A={context:void 0,load:e=>new Promise(t=>{const o=new(window.AudioContext||window.webkitAudioContext),n=(e,t=0)=>{const n=o.createBufferSource();n.buffer=e,n.detune.value=t,n.connect(o.destination),n.start(0)};new G(o,e,e=>t({sounds:e,context:o,playSound:n})).load()})},D=[["B4"],["D4"],["E4","E3"],[],["E4","G3"],[],["E4"],["F#5"],["G5","C3"],[],["G5","E3"],[],["G5"],["A5"],["D3","F#5"],[],["F#4","F#5"]];var F={pirates:[["E3"],[],["E3"],["E3"],[],["E3"],["E3"],[],["E3"],["E3"],["E3"],["E3"],["E3"],[],["E3"],["E3"],[],["E3"],["E3"],...D,[],["E4"],["D4"],["E3","G4","B4","D4"],["E4"],[],...D,[],["E4"],["D4"],["E3","E4"],[],[],["B4"],["D4"],["E4","E3"],[],["E4","G3"],[],["E4"],["G5"],["D3","A5"],[],["F#4","A5"],[],["A5"],["B5"],["C3","C5"],[],["E3","C5"],[],["B5"],["A5"],["E3","B5"],["E4"],[],["G4"],["B4"],["E4"],["F#5"],[],["C3","G5"],[],["E4","G5"],[],["A5"],[],["E3","B5"],["E4"],[],["G4"],["B4"],["E4"],["G5"],[],["D3","F#5"],[],["F#4","F#5"],[],["G5"],["E4"],["D3","F#5"],[],[],...D,[],["E4"],["D4"],["E3","G4","B4","D4"],["E4"],[],...D,[],["E4"],["D4"],["E3","E4"],[],["F#5"],[],["G5","C3"],[],["G5","E3"],[],["A5"],[],["B5","E3","G4","B4"],[],[],["G5"],["E4"],["B4"],[],[],[],["C3","E3","G4","C5"],[],[],[],["G5"],["E4"],["C4"],[],[],["A4","F#4","D3","F#5"],[]],up:[["G5"],[],["B5"],[],["G5"],[],["F#5","B4","D4"],[],[],[],[],[],[],[],[],["F#5"],[],["A5"],[],["F#5"],[],["D4","A4"],[],[],[],[],["D4"],[],["F#5","F#4"],[],["D4"],[],["C4","E3"],[],[],[],[],[],[],[],[],["E4"],[],["B5","B4"],[],[],[],["A5","A4"],[],[],[],[],[],["E4"],[],["B5","B4"],[],[],[],["A5","A4"],[],[],[],["G5"],[],[],[],["E4","E3"],[],[],[],[],[],[]]};function S(e,t,o){const n=Object.create(e);return n.key=t[o],n.indx=o,n}function g(e){var t,o,v,p,B,G=e.key+"";function A(){return e.mouseover_handler(e)}return{c(){t=n("div"),o=a(G),v=r(),this.h()},l(e){t=s(e,"DIV",{class:!0,active:!0,style:!0},!1);var n=l(t);o=c(n,G),v=i(n),n.forEach(E),this.h()},h(){u(t,"class","key svelte-bbsc4h"),u(t,"active",p=e.active.includes(e.key)),u(t,"style",`height: ${300-15*e.KNOTES.indexOf(e.key)}px`),B=d(t,"mouseover",A)},m(e,n){f(e,t,n),h(t,o),h(t,v)},p(o,n){e=n,o.active&&p!==(p=e.active.includes(e.key))&&u(t,"active",p)},d(e){e&&E(t),B()}}}function b(e){var t,o,G,A,D,F,b,k,C,y,m,T;let L=e.KKEYS,x=[];for(let t=0;t<L.length;t+=1)x[t]=g(S(e,L,t));return{c(){t=n("div"),o=n("button"),G=a("PLAY PIRATES"),A=r(),D=n("button"),F=a("PLAY UP"),b=r(),k=n("button"),C=a("STOP SONGS"),y=r(),m=n("div");for(let e=0;e<x.length;e+=1)x[e].c();this.h()},l(e){t=s(e,"DIV",{},!1);var n=l(t);o=s(n,"BUTTON",{},!1);var a=l(o);G=c(a,"PLAY PIRATES"),a.forEach(E),A=i(n),D=s(n,"BUTTON",{},!1);var r=l(D);F=c(r,"PLAY UP"),r.forEach(E),b=i(n),k=s(n,"BUTTON",{},!1);var u=l(k);C=c(u,"STOP SONGS"),u.forEach(E),y=i(n),m=s(n,"DIV",{class:!0},!1);var d=l(m);for(let e=0;e<x.length;e+=1)x[e].l(d);d.forEach(E),n.forEach(E),this.h()},h(){u(m,"class","kalimba svelte-bbsc4h"),T=[d(o,"click",e.click_handler),d(D,"click",e.click_handler_1),d(k,"click",e.click_handler_2)]},m(e,n){f(e,t,n),h(t,o),h(o,G),h(t,A),h(t,D),h(D,F),h(t,b),h(t,k),h(k,C),h(t,y),h(t,m);for(let e=0;e<x.length;e+=1)x[e].m(m,null)},p(e,t){if(e.active||e.KKEYS||e.KNOTES){let o;for(L=t.KKEYS,o=0;o<L.length;o+=1){const n=S(t,L,o);x[o]?x[o].p(e,n):(x[o]=g(n),x[o].c(),x[o].m(m,null))}for(;o<x.length;o+=1)x[o].d(1);x.length=L.length}},i:v,o:v,d(e){e&&E(t),p(x,e),B(T)}}}function k(e,t,o){let n;console.log(F),A.load(["/kalimba/lam01-tip-med.wav"]).then(e=>{o("api",E=e)});const a=["F","F#","G","Ab","A","Bb","B","C","C#","D","Eb","E"],r={};function s(){clearInterval(n)}function l(e){const t=[...e];let a=0;clearInterval(n),n=setInterval(()=>{if(++a%2)return void o("active",u=[]);const e=t.shift();t.length||clearInterval(n),o("active",u=e),e.forEach(e=>{const t=r[e];t?E.playSound(E.sounds[0],t):console.log("Note not found: ",t)})},100)}[3,4,5].forEach((e,t)=>{a.forEach((n,a)=>{o("notesDict",r[`${n}${e}`]=100*a+1200*t,r)})}),console.log(r);const c=["C3","D3","E3","F#4","G4","A4","B4","C4","D4","E4","F#5","G5","A5","B5","C5","D5","E5"];let i=[];for(let e=0;e<c.length;e++)e%2?i.unshift(c[e]):i.push(c[e]);console.log(i);let E,u;return o("api",E={sounds:[]}),o("active",u=[]),{notesDict:r,stopSong:s,playSong:l,KNOTES:c,KKEYS:i,api:E,active:u,click_handler:()=>l(F.pirates),click_handler_1:()=>l(F.up),click_handler_2:()=>s(),mouseover_handler:({key:e})=>E.playSound(E.sounds[0],r[e])}}export default class extends e{constructor(e){super(),t(this,e,k,b,o,[])}}
