import{_ as n,a as t,b as o,c as e,i as r,s as a,d as i,S as c,f as s,q as u,w as l,g as f,h as E,r as h,y as d,j as v,k as B,J as A,l as G,u as p,n as D,K as F,L as S,M as g}from"./index.37376eb6.js";function b(n,t,o){this.context=n,this.urlList=t,this.onload=o,this.bufferList=new Array,this.loadCount=0}b.prototype.loadBuffer=function(n,t){var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer";var e=this;o.onload=function(){e.context.decodeAudioData(o.response,function(o){o?(e.bufferList[t]=o,++e.loadCount==e.urlList.length&&e.onload(e.bufferList)):alert("error decoding file data: "+n)},function(n){console.error("decodeAudioData error",n)})},o.onerror=function(){alert("BufferLoader: XHR error")},o.send()},b.prototype.load=function(){for(var n=0;n<this.urlList.length;++n)this.loadBuffer(this.urlList[n],n)};var k={context:void 0,load:function(n){return new Promise(function(t){var o=new(window.AudioContext||window.webkitAudioContext),e=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=o.createBufferSource();e.buffer=n,e.detune.value=t,e.connect(o.destination),e.start(0)};new b(o,n,function(n){return t({sounds:n,context:o,playSound:e})}).load()})}},y=[["B4"],["D4"],["E4","E3"],[],["E4","G3"],[],["E4"],["F#5"],["G5","C3"],[],["G5","E3"],[],["G5"],["A5"],["D3","F#5"],[],["F#4","F#5"]],C={pirates:[].concat([["E3"],[],["E3"],["E3"],[],["E3"],["E3"],[],["E3"],["E3"],["E3"],["E3"],["E3"],[],["E3"],["E3"],[],["E3"],["E3"]],y,[[],["E4"],["D4"],["E3","G4","B4","D4"],["E4"],[]],y,[[],["E4"],["D4"],["E3","E4"],[],[],["B4"],["D4"],["E4","E3"],[],["E4","G3"],[],["E4"],["G5"],["D3","A5"],[],["F#4","A5"],[],["A5"],["B5"],["C3","C5"],[],["E3","C5"],[],["B5"],["A5"],["E3","B5"],["E4"],[],["G4"],["B4"],["E4"],["F#5"],[],["C3","G5"],[],["E4","G5"],[],["A5"],[],["E3","B5"],["E4"],[],["G4"],["B4"],["E4"],["G5"],[],["D3","F#5"],[],["F#4","F#5"],[],["G5"],["E4"],["D3","F#5"],[],[]],y,[[],["E4"],["D4"],["E3","G4","B4","D4"],["E4"],[]],y,[[],["E4"],["D4"],["E3","E4"],[],["F#5"],[],["G5","C3"],[],["G5","E3"],[],["A5"],[],["B5","E3","G4","B4"],[],[],["G5"],["E4"],["B4"],[],[],[],["C3","E3","G4","C5"],[],[],[],["G5"],["E4"],["C4"],[],[],["A4","F#4","D3","F#5"],[]]),up:[["G5"],[],["B5"],[],["G5"],[],["F#5","B4","D4"],[],[],[],[],[],[],[],[],["F#5"],[],["A5"],[],["F#5"],[],["D4","A4"],[],[],[],[],["D4"],[],["F#5","F#4"],[],["D4"],[],["C4","E3"],[],[],[],[],[],[],[],[],["E4"],[],["B5","B4"],[],[],[],["A5","A4"],[],[],[],[],[],["E4"],[],["B5","B4"],[],[],[],["A5","A4"],[],[],[],["G5"],[],[],[],["E4","E3"],[],[],[],[],[],[]]};function T(n,t,o){var e=Object.create(n);return e.key=t[o],e.indx=o,e}function L(n){var t,o,e,r,a,i=n.key+"";function c(){return n.mouseover_handler(n)}return{c:function(){t=s("div"),o=u(i),e=l(),this.h()},l:function(n){t=f(n,"DIV",{class:!0,active:!0,style:!0},!1);var r=E(t);o=h(r,i),e=d(r),r.forEach(v),this.h()},h:function(){B(t,"class","key svelte-bbsc4h"),B(t,"active",r=n.active.includes(n.key)),B(t,"style","height: ".concat(300-15*n.KNOTES.indexOf(n.key),"px")),a=A(t,"mouseover",c)},m:function(n,r){G(n,t,r),p(t,o),p(t,e)},p:function(o,e){n=e,o.active&&r!==(r=n.active.includes(n.key))&&B(t,"active",r)},d:function(n){n&&v(t),a()}}}function _(n){for(var t,o,e,r,a,i,c,g,b,k,y,C,_=n.KKEYS,w=[],K=0;K<_.length;K+=1)w[K]=L(T(n,_,K));return{c:function(){t=s("div"),o=s("button"),e=u("PLAY PIRATES"),r=l(),a=s("button"),i=u("PLAY UP"),c=l(),g=s("button"),b=u("STOP SONGS"),k=l(),y=s("div");for(var n=0;n<w.length;n+=1)w[n].c();this.h()},l:function(n){t=f(n,"DIV",{},!1);var s=E(t);o=f(s,"BUTTON",{},!1);var u=E(o);e=h(u,"PLAY PIRATES"),u.forEach(v),r=d(s),a=f(s,"BUTTON",{},!1);var l=E(a);i=h(l,"PLAY UP"),l.forEach(v),c=d(s),g=f(s,"BUTTON",{},!1);var B=E(g);b=h(B,"STOP SONGS"),B.forEach(v),k=d(s),y=f(s,"DIV",{class:!0},!1);for(var A=E(y),G=0;G<w.length;G+=1)w[G].l(A);A.forEach(v),s.forEach(v),this.h()},h:function(){B(y,"class","kalimba svelte-bbsc4h"),C=[A(o,"click",n.click_handler),A(a,"click",n.click_handler_1),A(g,"click",n.click_handler_2)]},m:function(n,s){G(n,t,s),p(t,o),p(o,e),p(t,r),p(t,a),p(a,i),p(t,c),p(t,g),p(g,b),p(t,k),p(t,y);for(var u=0;u<w.length;u+=1)w[u].m(y,null)},p:function(n,t){if(n.active||n.KKEYS||n.KNOTES){var o;for(_=t.KKEYS,o=0;o<_.length;o+=1){var e=T(t,_,o);w[o]?w[o].p(n,e):(w[o]=L(e),w[o].c(),w[o].m(y,null))}for(;o<w.length;o+=1)w[o].d(1);w.length=_.length}},i:D,o:D,d:function(n){n&&v(t),F(w,n),S(C)}}}function w(n,t,o){var e;console.log(C),k.load(["/Misiones.wav"]).then(function(n){o("api",f=n)});var r=["F","F#","G","Ab","A","Bb","B","C","C#","D","Eb","E"],a={};function i(){clearInterval(e)}function c(n){var t=g(n),r=0;clearInterval(e),e=setInterval(function(){if(++r%2)o("active",E=[]);else{var n=t.shift();t.length||clearInterval(e),o("active",E=n),n.forEach(function(n){var t=a[n];t?f.playSound(f.sounds[0],t):console.log("Note not found: ",t)})}},100)}[3,4,5].forEach(function(n,t){r.forEach(function(e,r){o("notesDict",a["".concat(e).concat(n)]=100*r+1200*t,a)})});for(var s=["C3","D3","E3","F#4","G4","A4","B4","C4","D4","E4","F#5","G5","A5","B5","C5","D5","E5"],u=[],l=0;l<s.length;l++)l%2?u.unshift(s[l]):u.push(s[l]);console.log(u);var f,E;return o("api",f={sounds:[]}),o("active",E=[]),{notesDict:a,stopSong:i,playSong:c,KNOTES:s,KKEYS:u,api:f,active:E,click_handler:function(){return c(C.pirates)},click_handler_1:function(){return c(C.up)},click_handler_2:function(){return i()},mouseover_handler:function(n){var t=n.key;return f.playSound(f.sounds[0],a[t])}}}export default(function(s){function u(n){var c;return t(this,u),c=o(this,e(u).call(this)),r(i(c),n,w,_,a,[]),c}return n(u,c),u}());
