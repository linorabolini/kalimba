import{_ as n,a as t,b as o,c as e,i as a,s as r,d as c,S as i,f as u,q as s,w as l,g as f,h as E,r as h,y as d,j as v,k as B,J as p,l as A,u as G,n as D,K as g,L as F,M as S}from"./index.37376eb6.js";function b(n,t,o){this.context=n,this.urlList=t,this.onload=o,this.bufferList=new Array,this.loadCount=0}b.prototype.loadBuffer=function(n,t){var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer";var e=this;o.onload=function(){e.context.decodeAudioData(o.response,function(o){o?(e.bufferList[t]=o,++e.loadCount==e.urlList.length&&e.onload(e.bufferList)):alert("error decoding file data: "+n)},function(n){console.error("decodeAudioData error",n)})},o.onerror=function(){alert("BufferLoader: XHR error")},o.send()},b.prototype.load=function(){for(var n=0;n<this.urlList.length;++n)this.loadBuffer(this.urlList[n],n)};var k={context:void 0,load:function(n){return new Promise(function(t){var o=new(window.AudioContext||window.webkitAudioContext),e=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=o.createBufferSource();e.buffer=n,e.detune.value=t,e.connect(o.destination),e.start(0)};new b(o,n,function(n){return t({sounds:n,context:o,playSound:e})}).load()})}},y=[["B4"],["D4"],["E4","E3"],[],["E4","G3"],[],["E4"],["F#5"],["G5","C3"],[],["G5","E3"],[],["G5"],["A5"],["D3","F#5"],[],["F#4","F#5"]],C={pirates:[].concat([["E3"],[],["E3"],["E3"],[],["E3"],["E3"],[],["E3"],["E3"],["E3"],["E3"],["E3"],[],["E3"],["E3"],[],["E3"],["E3"]],y,[[],["E4"],["D4"],["E3","G4","B4","D4"],["E4"],[]],y,[[],["E4"],["D4"],["E3","E4"],[],[],["B4"],["D4"],["E4","E3"],[],["E4","G3"],[],["E4"],["G5"],["D3","A5"],[],["F#4","A5"],[],["A5"],["B5"],["C3","C5"],[],["E3","C5"],[],["B5"],["A5"],["E3","B5"],["E4"],[],["G4"],["B4"],["E4"],["F#5"],[],["C3","G5"],[],["E4","G5"],[],["A5"],[],["E3","B5"],["E4"],[],["G4"],["B4"],["E4"],["G5"],[],["D3","F#5"],[],["F#4","F#5"],[],["G5"],["E4"],["D3","F#5"],[],[]],y,[[],["E4"],["D4"],["E3","G4","B4","D4"],["E4"],[]],y,[[],["E4"],["D4"],["E3","E4"],[],["F#5"],[],["G5","C3"],[],["G5","E3"],[],["A5"],[],["B5","E3","G4","B4"],[],[],["G5"],["E4"],["B4"],[],[],[],["C3","E3","G4","C5"],[],[],[],["G5"],["E4"],["C4"],[],[],["A4","F#4","D3","F#5"],[]]),up:[["G5"],[],["B5"],[],["G5"],[],["F#5","B4","D4"],[],[],[],[],[],[],[],[],["F#5"],[],["A5"],[],["F#5"],[],["D4","A4"],[],[],[],[],["D4"],[],["F#5","F#4"],[],["D4"],[],["C4","E3"],[],[],[],[],[],[],[],[],["E4"],[],["B5","B4"],[],[],[],["A5","A4"],[],[],[],[],[],["E4"],[],["B5","B4"],[],[],[],["A5","A4"],[],[],[],["G5"],[],[],[],["E4","E3"],[],[],[],[],[],[]]};function T(n,t,o){var e=Object.create(n);return e.key=t[o],e.indx=o,e}function m(n){var t,o,e,a,r,c=n.key+"";function i(){return n.mouseover_handler(n)}return{c:function(){t=u("div"),o=s(c),e=l(),this.h()},l:function(n){t=f(n,"DIV",{class:!0,active:!0,style:!0},!1);var a=E(t);o=h(a,c),e=d(a),a.forEach(v),this.h()},h:function(){B(t,"class","key svelte-bbsc4h"),B(t,"active",a=n.active.includes(n.key)),B(t,"style","height: ".concat(300-15*n.KNOTES.indexOf(n.key),"px")),r=p(t,"mouseover",i)},m:function(n,a){A(n,t,a),G(t,o),G(t,e)},p:function(o,e){n=e,o.active&&a!==(a=n.active.includes(n.key))&&B(t,"active",a)},d:function(n){n&&v(t),r()}}}function L(n){for(var t,o,e,a,r,c,i,S,b,k,y,C,L=n.KKEYS,_=[],w=0;w<L.length;w+=1)_[w]=m(T(n,L,w));return{c:function(){t=u("div"),o=u("button"),e=s("PLAY PIRATES"),a=l(),r=u("button"),c=s("PLAY UP"),i=l(),S=u("button"),b=s("STOP SONGS"),k=l(),y=u("div");for(var n=0;n<_.length;n+=1)_[n].c();this.h()},l:function(n){t=f(n,"DIV",{},!1);var u=E(t);o=f(u,"BUTTON",{},!1);var s=E(o);e=h(s,"PLAY PIRATES"),s.forEach(v),a=d(u),r=f(u,"BUTTON",{},!1);var l=E(r);c=h(l,"PLAY UP"),l.forEach(v),i=d(u),S=f(u,"BUTTON",{},!1);var B=E(S);b=h(B,"STOP SONGS"),B.forEach(v),k=d(u),y=f(u,"DIV",{class:!0},!1);for(var p=E(y),A=0;A<_.length;A+=1)_[A].l(p);p.forEach(v),u.forEach(v),this.h()},h:function(){B(y,"class","kalimba svelte-bbsc4h"),C=[p(o,"click",n.click_handler),p(r,"click",n.click_handler_1),p(S,"click",n.click_handler_2)]},m:function(n,u){A(n,t,u),G(t,o),G(o,e),G(t,a),G(t,r),G(r,c),G(t,i),G(t,S),G(S,b),G(t,k),G(t,y);for(var s=0;s<_.length;s+=1)_[s].m(y,null)},p:function(n,t){if(n.active||n.KKEYS||n.KNOTES){var o;for(L=t.KKEYS,o=0;o<L.length;o+=1){var e=T(t,L,o);_[o]?_[o].p(n,e):(_[o]=m(e),_[o].c(),_[o].m(y,null))}for(;o<_.length;o+=1)_[o].d(1);_.length=L.length}},i:D,o:D,d:function(n){n&&v(t),g(_,n),F(C)}}}function _(n,t,o){var e;console.log(C),k.load(["/kalimba/lam01-tip-med.wav"]).then(function(n){o("api",f=n)});var a=["F","F#","G","Ab","A","Bb","B","C","C#","D","Eb","E"],r={};function c(){clearInterval(e)}function i(n){var t=S(n),a=0;clearInterval(e),e=setInterval(function(){if(++a%2)o("active",E=[]);else{var n=t.shift();t.length||clearInterval(e),o("active",E=n),n.forEach(function(n){var t=r[n];t?f.playSound(f.sounds[0],t):console.log("Note not found: ",t)})}},100)}[3,4,5].forEach(function(n,t){a.forEach(function(e,a){o("notesDict",r["".concat(e).concat(n)]=100*a+1200*t,r)})}),console.log(r);for(var u=["C3","D3","E3","F#4","G4","A4","B4","C4","D4","E4","F#5","G5","A5","B5","C5","D5","E5"],s=[],l=0;l<u.length;l++)l%2?s.unshift(u[l]):s.push(u[l]);console.log(s);var f,E;return o("api",f={sounds:[]}),o("active",E=[]),{notesDict:r,stopSong:c,playSong:i,KNOTES:u,KKEYS:s,api:f,active:E,click_handler:function(){return i(C.pirates)},click_handler_1:function(){return i(C.up)},click_handler_2:function(){return c()},mouseover_handler:function(n){var t=n.key;return f.playSound(f.sounds[0],r[t])}}}export default(function(u){function s(n){var i;return t(this,s),i=o(this,e(s).call(this)),a(c(i),n,_,L,r,[]),i}return n(s,i),s}());
